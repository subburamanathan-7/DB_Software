{"ast":null,"code":"var _jsxFileName = \"/Users/mac/Desktop/FORESE/DB_Software/frontend/src/components/FileUploadForm.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport Papa from 'papaparse';\nimport { FileUpload } from '../features/contacts/ContactServices';\nimport { useMutation, useQueryClient } from '@tanstack/react-query';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst FileUploadForm = () => {\n  _s();\n  const queryClient = useQueryClient();\n  const [file, setFile] = useState(null);\n  const [CSVData, setCSVData] = useState(null);\n  const handleFileChange = e => {\n    setFile(e.target.files[0]);\n  };\n  const fileUploadMutation = useMutation({\n    mutationFn: () => {\n      return FileUpload(CSVData, sessionStorage.getItem('user'));\n    },\n    onSuccess: data => {\n      //Object.keys(responseData).forEach(v => responseData[v] = 0)\n      queryClient.invalidateQueries(['contacts']);\n    }\n  });\n  const handleUpload = () => {\n    if (file) {\n      // console.log(file);\n      Papa.parse(file, {\n        complete: function (results) {\n          let CData = results.data;\n          delete CData['0'];\n          console.log(\"Finished:\", CData);\n          // console.log(\"Finished\");\n          setCSVData(CData);\n          console.log(CSVData);\n          fileUploadMutation.mutate();\n        }\n      });\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container mx-auto z-90\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-col py-12 px-12\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-xl font-bold text-[#000000] mb-4 text-center\",\n            children: \"Upload CSV or Excel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 49,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center justify-center mt-5\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              id: \"myfile\",\n              name: \"myfile\",\n              type: \"file\",\n              accept: \".xls, .xlsx, .csv\",\n              onChange: handleFileChange,\n              className: \" font-medium text-sm rounded-lg px-5 py-2.5 text-center w-full mx-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 52,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleUpload,\n              className: \"bg-[#8EA7E9] hover:scale-95 focus:outine-none font-medium text-sm rounded-lg px-5 py-2.5 text-center w-full mx-2\",\n              id: \"submit\",\n              children: \"Upload File\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 54,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 51,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 9\n    }, this)\n  }, void 0, false);\n};\n_s(FileUploadForm, \"AZWLcRZRO4THS9GYMpthNQJ91kk=\", false, function () {\n  return [useQueryClient, useMutation];\n});\n_c = FileUploadForm;\nexport default FileUploadForm;\n\n// <div>\n// <h2>Upload Excel or CSV File</h2>\n// <input id = \"myfile\" name=\"myfile\" type=\"file\" accept=\".xls, .xlsx, .csv\" onChange={handleFileChange} />\n// <button onClick={handleUpload}>Upload</button>\n// </div>\nvar _c;\n$RefreshReg$(_c, \"FileUploadForm\");","map":{"version":3,"names":["React","useState","Papa","FileUpload","useMutation","useQueryClient","jsxDEV","_jsxDEV","Fragment","_Fragment","FileUploadForm","_s","queryClient","file","setFile","CSVData","setCSVData","handleFileChange","e","target","files","fileUploadMutation","mutationFn","sessionStorage","getItem","onSuccess","data","invalidateQueries","handleUpload","parse","complete","results","CData","console","log","mutate","children","className","fileName","_jsxFileName","lineNumber","columnNumber","id","name","type","accept","onChange","onClick","_c","$RefreshReg$"],"sources":["/Users/mac/Desktop/FORESE/DB_Software/frontend/src/components/FileUploadForm.js"],"sourcesContent":["import React, { useState } from 'react';\nimport Papa from 'papaparse'\n\nimport { FileUpload } from '../features/contacts/ContactServices';\nimport{ useMutation, useQueryClient} from '@tanstack/react-query'\n\nconst FileUploadForm = () => {\n  const queryClient = useQueryClient()\n  const [file, setFile] = useState(null);\n  const [CSVData, setCSVData] = useState(null);\n\n  const handleFileChange = (e) => {\n    setFile(e.target.files[0]);\n  };\n  const fileUploadMutation = useMutation({\n    mutationFn: ()=>{\n      return FileUpload(CSVData,sessionStorage.getItem('user'))\n    },\n    onSuccess:(data)=>{\n      //Object.keys(responseData).forEach(v => responseData[v] = 0)\n      queryClient.invalidateQueries(['contacts'])\n\n    }\n})\n\n  const handleUpload = () => {\n    if (file) {\n        // console.log(file);\n        Papa.parse(file, {\n            complete: function(results) {\n              let CData = results.data\n              delete CData['0']\n              console.log(\"Finished:\", CData);\n              // console.log(\"Finished\");\n              setCSVData(CData)\n              console.log(CSVData)\n\n              fileUploadMutation.mutate()\n            }}\n          )\n      }\n  };\n  \n  return (\n    <>\n        <div className=''>\n            <div className='container mx-auto z-90'>\n                <div className='flex flex-col py-12 px-12'>\n                    <h3 className='text-xl font-bold text-[#000000] mb-4 text-center'>Upload CSV or Excel</h3>\n                   \n                    <div className='flex items-center justify-center mt-5'>\n                        <input id = \"myfile\" name=\"myfile\" type=\"file\" accept=\".xls, .xlsx, .csv\" onChange={handleFileChange} className=' font-medium text-sm rounded-lg px-5 py-2.5 text-center w-full mx-2'/>\n\n                        <button onClick={handleUpload} className='bg-[#8EA7E9] hover:scale-95 focus:outine-none font-medium text-sm rounded-lg px-5 py-2.5 text-center w-full mx-2'\n                        id='submit' >\n                            Upload File\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n    \n    \n    </>\n        \n  );\n};\n\nexport default FileUploadForm;\n\n// <div>\n// <h2>Upload Excel or CSV File</h2>\n// <input id = \"myfile\" name=\"myfile\" type=\"file\" accept=\".xls, .xlsx, .csv\" onChange={handleFileChange} />\n// <button onClick={handleUpload}>Upload</button>\n// </div>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}