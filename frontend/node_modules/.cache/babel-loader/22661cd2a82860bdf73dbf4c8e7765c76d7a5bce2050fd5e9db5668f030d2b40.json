{"ast":null,"code":"var _jsxFileName = \"/Users/mac/Desktop/FORESE/DB_Software/DB_Software/frontend/src/components/DeleteContactForm.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { toast } from 'react-toastify';\nimport { deleteContact, getContact } from '../features/contacts/ContactServices';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction DeleteContactForm(currentUserID, onClose) {\n  _s();\n  const [userId, setUserId] = useState(currentUserID.currentUserID);\n  const queryClient = useQueryClient();\n  const [formData, setFormData] = useState({\n    name: '',\n    company: ''\n  });\n\n  // Delete Contacts\n  const deleteContactMutation = useMutation({\n    mutationFn: () => {\n      return deleteContact(currentUserID.currentUserID, sessionStorage.getItem('user'));\n    },\n    onSuccess: () => {\n      // Object.keys(responseData).forEach(v => responseData[v] = 0)\n      queryClient.invalidateQueries([\"contacts\"]);\n      queryClient.invalidateQueries([\"teamcontacts\"]);\n      queryClient.invalidateQueries([\"globalContacts\"]);\n      toast.success('Contact Deleted Succesfully', {\n        position: \"top-right\",\n        autoClose: 3000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true,\n        progress: undefined,\n        theme: \"light\"\n      });\n    },\n    onError: message => {\n      toast.error(`Try Again`, {\n        position: \"top-right\",\n        autoClose: 5000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true,\n        progress: undefined,\n        theme: \"light\"\n      });\n    }\n  });\n  // Get Contact\n  const getContactQuery = useQuery({\n    queryKey: ['contact', currentUserID],\n    queryFn: () => {\n      return getContact(currentUserID.currentUserID, sessionStorage.getItem('user'));\n    },\n    // enabled:false\n    enabled: !!userId\n    // refetchOnMount:false,\n    // refetchInterval: 2000,\n  });\n\n  getContactQuery.remove();\n  // if(!getContactQuery.isFetched || getContactQuery.isError)\n  //     // getContactQuery.refetch()\n  // {}\n  if (getContactQuery.isLoading || getContactQuery.isFetching) {\n    // return <Spinner/>\n    console.log(\"Loading\");\n  } else {\n    console.log(userId);\n    setUserId(null);\n    console.log(getContactQuery.data);\n    const currentState = {\n      name: getContactQuery.data.name,\n      company: getContactQuery.data.company\n    };\n    setFormData(currentState);\n  }\n  const handleSubmit = e => {\n    e.preventDefault();\n    deleteContactMutation.mutate();\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container mx-auto\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-col py-10 px-12\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \" my-[1%] text-center font-semibold text-[#000000] text-2xl\",\n            children: \"Delete Contact\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \" px-[3%] py-[2%] text-[#000000] font-base text-xl\",\n            children: [\"Delete \", formData.name, \" from \", formData.company, \"?\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center justify-center mt-5 text-white\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"px-[2%] cursor-pointer bg-[#D22B2B] focus:outine-none font-medium text-sm rounded-lg px-5 py-2.5 text-center w-full mx-2 hover:scale-95 duration-150\",\n              type: \"submit\",\n              id: \"cancel\",\n              onClick: () => {},\n              children: \"Cancel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 94,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \" px-[2%] cursor-pointer bg-[#8EA7E9] focus:outine-none font-medium text-sm rounded-lg px-5 py-2.5 text-center w-full mx-2 hover:scale-95 duration-150\",\n              type: \"submit\",\n              id: \"submit\",\n              onClick: handleSubmit,\n              children: \"Delete Contact\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 98,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 12\n    }, this)\n  }, void 0, false);\n}\n_s(DeleteContactForm, \"e5MsyurbdSN1w4lehJUd8W27p3k=\", false, function () {\n  return [useQueryClient, useMutation, useQuery];\n});\n_c = DeleteContactForm;\nexport default DeleteContactForm;\nvar _c;\n$RefreshReg$(_c, \"DeleteContactForm\");","map":{"version":3,"names":["React","useState","useQuery","useMutation","useQueryClient","toast","deleteContact","getContact","jsxDEV","_jsxDEV","Fragment","_Fragment","DeleteContactForm","currentUserID","onClose","_s","userId","setUserId","queryClient","formData","setFormData","name","company","deleteContactMutation","mutationFn","sessionStorage","getItem","onSuccess","invalidateQueries","success","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","theme","onError","message","error","getContactQuery","queryKey","queryFn","enabled","remove","isLoading","isFetching","console","log","data","currentState","handleSubmit","e","preventDefault","mutate","children","className","fileName","_jsxFileName","lineNumber","columnNumber","type","id","onClick","_c","$RefreshReg$"],"sources":["/Users/mac/Desktop/FORESE/DB_Software/DB_Software/frontend/src/components/DeleteContactForm.js"],"sourcesContent":["import React, {useState } from 'react'\nimport{useQuery, useMutation, useQueryClient} from '@tanstack/react-query'\nimport {toast} from 'react-toastify'\n\nimport {deleteContact, getContact} from '../features/contacts/ContactServices' \n\nfunction DeleteContactForm(currentUserID,onClose) {\n    const [userId,setUserId] = useState(currentUserID.currentUserID)\n    const queryClient = useQueryClient()\n    const [formData,setFormData]= useState({\n        name:'',\n        company:'',\n    })\n\n    // Delete Contacts\n    const deleteContactMutation = useMutation({\n        mutationFn:()=>{\n            return deleteContact(currentUserID.currentUserID,sessionStorage.getItem('user'))\n        },\n        onSuccess: () =>{\n            // Object.keys(responseData).forEach(v => responseData[v] = 0)\n            queryClient.invalidateQueries([\"contacts\"])\n            queryClient.invalidateQueries([\"teamcontacts\"])\n            queryClient.invalidateQueries([\"globalContacts\"])\n\n            toast.success('Contact Deleted Succesfully', {\n                position: \"top-right\",\n                autoClose: 3000,\n                hideProgressBar: false,\n                closeOnClick: true,\n                pauseOnHover: true,\n                draggable: true,\n                progress: undefined,\n                theme: \"light\",\n            });\n        },\n        onError:(message)=>{\n            toast.error(`Try Again`, {\n                position: \"top-right\",\n                autoClose: 5000,\n                hideProgressBar: false,\n                closeOnClick: true,\n                pauseOnHover: true,\n                draggable: true,\n                progress: undefined,\n                theme: \"light\",\n            });\n        } \n    })\n    // Get Contact\n    const getContactQuery = useQuery({\n        queryKey:['contact',currentUserID],\n        queryFn:()=>{\n            return getContact(currentUserID.currentUserID,sessionStorage.getItem('user'))\n        },\n        // enabled:false\n        enabled: !!userId,\n        // refetchOnMount:false,\n        // refetchInterval: 2000,\n    })\n    getContactQuery.remove()\n    // if(!getContactQuery.isFetched || getContactQuery.isError)\n    //     // getContactQuery.refetch()\n    // {}\n    if(getContactQuery.isLoading || getContactQuery.isFetching){\n        // return <Spinner/>\n        console.log(\"Loading\")\n    }\n    else{\n        console.log(userId)\n        setUserId(null)    \n        console.log(getContactQuery.data)\n        const currentState = {\n            name:getContactQuery.data.name,\n            company:getContactQuery.data.company,\n        }\n        setFormData(currentState)\n    }\n    const handleSubmit = (e) => {\n        e.preventDefault();\n        deleteContactMutation.mutate() \n    }\n\n    return (\n        <>\n           <div className=''>\n            <div className='container mx-auto'>\n                <div className='flex flex-col py-10 px-12'>\n                    <h3 className=' my-[1%] text-center font-semibold text-[#000000] text-2xl'>Delete Contact</h3>\n                    <div className=' px-[3%] py-[2%] text-[#000000] font-base text-xl'>\n                        Delete {formData.name} from {formData.company}?\n                    </div>\n                    <div className='flex items-center justify-center mt-5 text-white'>\n                        <button className='px-[2%] cursor-pointer bg-[#D22B2B] focus:outine-none font-medium text-sm rounded-lg px-5 py-2.5 text-center w-full mx-2 hover:scale-95 duration-150'\n                        type='submit' id='cancel' onClick={()=>{}}>\n                            Cancel\n                        </button>\n                        <button className=' px-[2%] cursor-pointer bg-[#8EA7E9] focus:outine-none font-medium text-sm rounded-lg px-5 py-2.5 text-center w-full mx-2 hover:scale-95 duration-150'\n                        type='submit' id='submit' onClick={handleSubmit}>\n                            Delete Contact\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n        </>\n\n    )\n}\n\nexport default DeleteContactForm"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}